<div
  class="document-view-modal"
  [class.rtl]="isRTL"
  [attr.dir]="isRTL ? 'rtl' : 'ltr'"
>
  <!-- Header with back arrow, title, tags, and action buttons -->
  <div class="modal-header">
    <div class="header-left">
      <button mat-icon-button class="back-button" (click)="onClose()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h2 class="modal-title" [class.arabic-font]="isRTL">
        {{ document.title }}
      </h2>
    </div>
    
    <div class="header-tags">
      <span class="tag status-tag" [ngClass]="getStatusColor(document.status)">
        {{ "statuses." + document.status | translate }}
      </span>
      <span class="tag priority-tag" [ngClass]="getPriorityColor(document.priority)">
        {{ "priorities." + document.priority | translate }}
      </span>
      <span class="tag department-tag">{{ document.department }}</span>
    </div>
    
    <div class="header-actions">
      <button mat-button class="edit-button" (click)="onEdit()">
        <mat-icon>edit</mat-icon>
        {{ "common.edit" | translate }}
      </button>
      <button mat-button class="comments-button">
        <mat-icon>chat_bubble_outline</mat-icon>
        {{ "common.comments" | translate }} (0)
      </button>
      <button mat-raised-button color="primary" class="download-button" (click)="openPdfInNewTab()">
        <mat-icon>download</mat-icon>
        {{ "common.download" | translate }}
      </button>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="modal-content">
    <!-- Left Panel - Document Preview -->
    <div class="document-preview-panel">
      <h3 class="panel-title" [class.arabic-font]="isRTL">
        {{ "documents.view.documentPreview" | translate }}
      </h3>
      
      <div class="preview-content">
        <p class="document-description" [class.arabic-font]="isRTL">
          {{ document.description || "No description provided" }}
        </p>
        
        <!-- PDF Viewer -->
        <div class="pdf-viewer">
          <div class="pdf-toolbar">
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>menu</mat-icon>
            </button>
            <span class="page-info">1 / 1</span>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>zoom_out</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>zoom_in</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>grid_view</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>rotate_left</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>rotate_right</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>download</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>print</mat-icon>
            </button>
            <button mat-icon-button class="toolbar-btn">
              <mat-icon>more_vert</mat-icon>
            </button>
          </div>

          <div class="pdf-content">
            <!-- PDF Viewer Component -->
            <div class="pdf-viewer-container" *ngIf="document?.attachments?.length > 0; else noAttachment">
              <iframe 
                [src]="getPdfUrl()" 
                class="pdf-iframe" 
                frameborder="0" 
                width="100%" 
                height="600"
                title="PDF Document Viewer">
              </iframe>
            </div>
            
            <!-- No attachment fallback -->
            <ng-template #noAttachment>
              <div class="pdf-placeholder">
                <div class="no-document-message">
                  <mat-icon class="no-document-icon">description_off</mat-icon>
                  <p>{{ 'documents.view.noDocumentFound' | translate }}</p>
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Panel - Document Information -->
    <div class="document-info-panel">
      <h3 class="panel-title" [class.arabic-font]="isRTL">
        {{ "documents.view.documentInformation" | translate }}
      </h3>
      
      <div class="info-content">
        <div class="info-item">
          <span class="info-label">{{ "documents.fields.department" | translate }}:</span>
          <span class="info-value">{{ document.department }}</span>
        </div>
        
        <div class="info-item">
          <span class="info-label">{{ "documents.fields.uploadDate" | translate }}:</span>
          <span class="info-value">{{ formatDate(document.createdAt) }}</span>
        </div>
        
        <div class="info-item">
          <span class="info-label">{{ "documents.fields.fileSize" | translate }}:</span>
          <span class="info-value">{{ document.formattedFileSize }}</span>
        </div>
        
        <div class="info-item">
          <span class="info-label">{{ "documents.fields.fileType" | translate }}:</span>
          <span class="info-value">{{ getFileTypeDisplay(document.mimeType) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
